package exploiter.controller;

import AgameMain.Command;
import AgameMain.Main;
import exploiter.Exploiter;
import exploiter.service.ResearchByIdService;

public class LogInController implements Controller {

	ResearchByIdService service = new ResearchByIdService();

	public void process() {
		System.out.println("↓↓로그인↓↓");
		System.out.println("id : ");
		String id = Main.sc.nextLine();

		System.out.println("pw : ");
		String password = Main.sc.nextLine();

		Exploiter exploiter = service.researchById(id);
		
		System.out.println(exploiter); // test

		if (exploiter != null && exploiter.getPassword().equals(password) && exploiter.getAdmin()==0) {
			
			Main.user = exploiter;
			System.out.printf("%s 님이 로그인 하였습니다.", Main.user.getNickname());
			
			Main.userMenu();
			Command.userCommand();
			
<<<<<<< HEAD
			Command command = AgameMain.Command.GetInstance();
			int select = Integer.parseInt(Main.sc.nextLine());
			command.GetUserContainer().get(select).process();
=======
			// 함수로 빼줌-test 김지연
//			Command command = AgameMain.Command.GetInstance();
//			int select = Integer.parseInt(Main.sc.nextLine());
//			String user = "user";
//			command.command.get(user).get(select).process();
>>>>>>> d7d4aece355bc3bf33cf6114e5ca21a95954d05f
			
			
		} else if(exploiter != null && exploiter.getPassword().equals(password) && exploiter.getAdmin()==1) {
			
			Main.user = exploiter;
			System.out.printf("관리자 %s 님이 로그인 하였습니다.", Main.user.getNickname());
			
			Main.adminMenu();
			Command.adminCommand();
			
<<<<<<< HEAD
			Command command = AgameMain.Command.GetInstance();
			int select = Integer.parseInt(Main.sc.nextLine());
			command.GetAdminContainer().get(select).process();
=======
			// 함수로 빼줌-test 김지연
//			Command command = AgameMain.Command.GetInstance();
//			int select = Integer.parseInt(Main.sc.nextLine());
//			String user = "admin";
//			command.command.get(user).get(select).process();
>>>>>>> d7d4aece355bc3bf33cf6114e5ca21a95954d05f

			
		}
		
		else {
			System.out.println("로그인 실패");
		}

	}
}