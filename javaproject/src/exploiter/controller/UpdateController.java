package exploiter.controller;

import AgameMain.Main;
import exploiter.Exploiter;
import exploiter.service.UpdateService;

public class UpdateController implements Controller {

	private static UpdateController instance;

	public static UpdateController getInstace() {

		if (instance == null) {
			instance = new UpdateController();
		}

		return instance;
	}

	UpdateService service = new UpdateService();

	public void process() {

		String targetId = Main.user.getId();
		if (Main.user.getAdmin() == 1) {
			System.out.println("정보를 수정할 id를 입력해주세요.");
			targetId = Main.sc.nextLine();
		}

		System.out.println("새로운 id를 입력해주세요.");
		String id = Main.sc.nextLine();

		System.out.println("새로운 비밀번호를 입력해주세요.");
		String password = Main.sc.nextLine();

		System.out.println("새로운 닉네임을 입력해주세요.");
		String nickname = Main.sc.nextLine();

		int admin = 0;
		if (Main.user.getAdmin() == 1) {
			System.out.println("해당 유저 관리자 여부");
			admin = Main.sc.nextInt();
		}

		int result = service.update(new Exploiter(id, password, nickname, admin), targetId);

		if (result > 0) {
			System.out.println("수정되었습니다.");
		} else {
			System.out.println("수정 실패");
		}

	}
}
